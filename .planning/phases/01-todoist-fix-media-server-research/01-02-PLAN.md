---
phase: 01-todoist-fix-media-server-research
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/01-todoist-fix-media-server-research/MEDIA-SERVER-RESEARCH.md
autonomous: true

must_haves:
  truths:
    - "A research document exists that explains whether managing Plex/Overseerr/Sonarr on Umbrel from the Telegram bot is feasible"
    - "The document covers API endpoints, authentication methods, and required credentials for each service"
    - "The document provides a concrete recommendation on what to build first and what to defer"
    - "The document identifies open questions that need user input before implementation"
  artifacts:
    - path: ".planning/phases/01-todoist-fix-media-server-research/MEDIA-SERVER-RESEARCH.md"
      provides: "Feasibility analysis for media server management from Telegram bot"
      min_lines: 80
  key_links: []
---

<objective>
Write a focused research document on the feasibility of managing Plex, Overseerr, and Sonarr running on Umbrel from the OpenClaw Telegram assistant bot.

Purpose: This is the secondary deliverable of Phase 1. The user wants to know if it's possible before committing to implementation. This is research only -- no code is written in this plan.
Output: MEDIA-SERVER-RESEARCH.md with API analysis, feasibility assessment, and implementation recommendations.
</objective>

<execution_context>
@/Users/greg/.claude/get-shit-done/workflows/execute-plan.md
@/Users/greg/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-todoist-fix-media-server-research/01-RESEARCH.md
@tasks/todoist/config.js
@tasks/weather/config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write media server feasibility research document</name>
  <files>.planning/phases/01-todoist-fix-media-server-research/MEDIA-SERVER-RESEARCH.md</files>
  <action>
Create a research document covering the feasibility of managing Plex/Overseerr/Sonarr on Umbrel from the OpenClaw Telegram bot. Use the findings from 01-RESEARCH.md as the foundation but restructure into a user-facing document.

The document should have these sections:

**1. Executive Summary**
- One-paragraph answer: Yes, it's feasible. All three services expose REST APIs.
- Recommended approach: Start with Overseerr (most useful for requesting media), then Sonarr (monitoring), Plex last (read-only queries, may not be needed).

**2. Service-by-Service Analysis**

For each service (Overseerr, Sonarr, Plex), document:
- What it does and why you'd control it from Telegram
- API base URL pattern on Umbrel (e.g., `http://umbrel.local:5055/api/v1/`)
- Authentication method (API key in header)
- Key endpoints the bot would use (2-4 most useful ones)
- Example CLI command showing what the task module invocation would look like

Overseerr (Port 5055):
- Search media: `GET /api/v1/search?query=Inception`
- Request movie: `POST /api/v1/request` with `{ mediaType: "movie", mediaId: 550 }`
- Get requests: `GET /api/v1/request?take=20`
- Auth: `X-Api-Key` header

Sonarr (Port 8989):
- Search series: `GET /api/v3/series/lookup?term=Breaking+Bad`
- Add series: `POST /api/v3/series`
- Get queue: `GET /api/v3/queue`
- Auth: `X-Api-Key` header

Plex (Port 32400):
- Get libraries: `GET /library/sections`
- Search library: `GET /library/sections/{id}/search?query=Inception`
- Auth: `X-Plex-Token` header
- Note: Unofficial API, less reliable

**3. Implementation Approach**
- Follows existing task module pattern (config.js + helpers/ directory)
- Each service would be its own task module (like todoist, weather)
- Credentials stored in credentials.json (same as other services)
- Example bot commands: "request Inception", "search Breaking Bad", "what's downloading"

**4. Network Considerations**
- Umbrel apps accessible via local network HTTP
- OpenClaw server must be on same network OR use VPN/tunnel
- `umbrel.local` (mDNS) or direct IP address
- This is the biggest unknown -- needs user to confirm network topology

**5. Open Questions for User**
- Is the OpenClaw server on the same network as Umbrel?
- Which service to prioritize first (recommendation: Overseerr)?
- Should media requests auto-approve or require manual approval?
- Is direct Plex API access needed or is Overseerr sufficient?

**6. Recommended Next Steps**
- Phase N (future): Implement Overseerr task module
- Phase N+1 (future): Implement Sonarr task module
- Defer: Plex direct API (Overseerr handles most use cases)

Keep the tone practical and concise. This is for Greg to read and decide whether to invest in implementation.
  </action>
  <verify>File exists at `.planning/phases/01-todoist-fix-media-server-research/MEDIA-SERVER-RESEARCH.md` and covers all 6 sections. Minimum 80 lines.</verify>
  <done>Research document provides clear feasibility analysis with API details, implementation approach following existing task module patterns, and actionable open questions for the user.</done>
</task>

</tasks>

<verification>
- MEDIA-SERVER-RESEARCH.md exists and is comprehensive
- Document covers Overseerr, Sonarr, and Plex APIs
- Document identifies network topology as the key open question
- Document provides concrete next steps for future phases
- No code was written (research only)
</verification>

<success_criteria>
User can read the research document and make an informed decision about whether and when to implement media server control from the Telegram bot.
</success_criteria>

<output>
After completion, create `.planning/phases/01-todoist-fix-media-server-research/01-02-SUMMARY.md`
</output>
