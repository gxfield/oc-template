---
phase: 02-quick-capture
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [TOOLS.md]
autonomous: true

must_haves:
  truths:
    - "TOOLS.md has a dedicated Quick Capture section listing all trigger phrases"
    - "User can say 'remember X' and TOOLS.md tells the LLM to add it to notes.md with Pacific timestamp"
    - "User can say 'we need X' or 'add X to shopping' and TOOLS.md tells the LLM to add it to shopping.md"
    - "User can say 'todo X' and TOOLS.md tells the LLM to add it to todos.md"
    - "Quick Capture section has exact input/output examples for every trigger phrase"
  artifacts:
    - path: "TOOLS.md"
      provides: "Quick Capture section with trigger phrases and parsing examples"
      contains: "Quick Capture"
  key_links:
    - from: "TOOLS.md Quick Capture section"
      to: "TOOLS.md Telegram handler sections"
      via: "cross-reference"
      pattern: "Quick Capture"
---

<objective>
Add a dedicated Quick Capture section to TOOLS.md that documents all natural language trigger phrases for fast note/todo/shopping capture.

Purpose: Users currently need to use specific command syntax to add items. Quick Capture defines natural language triggers (like "remember X", "todo X", "we need X") that cheap LLMs can recognize and route to the correct file operation. By consolidating all triggers in one visible section, LLMs can pattern-match user input reliably.

Output: Updated TOOLS.md with Quick Capture section containing trigger phrase table, parsing rules, and exact input/output examples.
</objective>

<execution_context>
@/Users/greg/.claude/get-shit-done/workflows/execute-plan.md
@/Users/greg/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@TOOLS.md
@household/notes.md
@household/todos.md
@household/shopping.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Quick Capture section to TOOLS.md</name>
  <files>TOOLS.md</files>
  <action>
Add a new "## Quick Capture" section to TOOLS.md, placed AFTER the "## Telegram Command Handlers" section and BEFORE the "## Edge Cases for Telegram Command Parsing" section.

The section should contain:

1. **Quick Capture Trigger Phrase Table** showing:
   - Trigger phrase pattern → Target file → Action
   - Cover these triggers:
     - Notes: "remember X", "note: X", "note X", "don't forget X"
     - Shopping: "add X to shopping", "we need X", "pick up X", "buy X", "X to the shopping list"
     - Todos: "todo X", "todo: X", "I need to X", "remind me to X" (when no time given)

2. **Parsing Rules** for each target:
   - Notes: Get Pacific timestamp from `node calendar.js now`, append `- [YYYY-MM-DD h:mm AM/PM PT] X` to household/notes.md
   - Shopping: Capitalize first letter, append `- X` to household/shopping.md. Parse commas and "and" into separate items.
   - Todos: Append `- [ ] X` to household/todos.md

3. **Exact Input/Output Examples** (at least 2 per target, 6+ total):
   - "remember the wifi password is fish1234" → notes.md with timestamp
   - "don't forget to tell mom about the party" → notes.md with timestamp
   - "we need eggs and milk" → shopping.md (2 separate lines)
   - "pick up dog food" → shopping.md
   - "todo fix the gate" → todos.md
   - "I need to call the dentist" → todos.md

4. **Disambiguation Rules** (when intent is unclear):
   - "remind me to X at 3pm" → Calendar event (has time), NOT todo
   - "remind me to X" (no time) → Todo
   - "add X" (no target specified) → Default to todo. If X is a food/grocery item, ask: "Did you want to add X to the shopping list or as a todo?"

5. **DO / DO NOT table** for Quick Capture:
   - DO: Recognize natural language triggers, confirm briefly
   - DO NOT: Ask "which file?" when intent is clear, require exact command syntax

Also update the existing Todos Telegram handler section (line ~150) to add "todo X" as an explicit input example alongside the existing "add fix the fence" example.
  </action>
  <verify>
Verify by checking TOOLS.md:
1. Grep for "## Quick Capture" heading exists
2. Count at least 6 Input/Output parsing examples in the section
3. Verify "remember", "we need", "todo" trigger phrases all appear
4. Verify DO/DO NOT table exists in section
5. Verify disambiguation rules for "remind me to X" (with/without time) exist
6. Verify Todos section now includes "todo X" as a trigger
  </verify>
  <done>
TOOLS.md has a Quick Capture section with trigger table, parsing rules, 6+ examples, disambiguation rules, and DO/DO NOT table. The Todos handler section also shows "todo X" as a valid input pattern.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Edge Cases section for Quick Capture conflicts</name>
  <files>TOOLS.md</files>
  <action>
Update the existing "Edge Cases for Telegram Command Parsing" section in TOOLS.md to add Quick Capture-specific edge cases:

1. Under "### Ambiguous commands", add:
   - "remind me to call mom" (no time) → Add to todos: `- [ ] Call mom`
   - "remind me to call mom at 3pm" (has time) → Calendar event, not todo
   - "remember the plumber's number is 555-1234" → Note (factual info to remember), not todo

2. Add a new subsection "### Quick Capture conflicts":
   - "add eggs" → Currently defaults to todo. But if user has been adding shopping items in same session, consider asking.
   - "we need to fix the fence" → Starts with "we need" but is a task, not shopping. Rule: if "we need" is followed by a verb (fix, call, clean, etc.), treat as todo. If followed by a noun (eggs, milk, bread), treat as shopping.
   - "buy concert tickets" → Starts with "buy" but is a task, not shopping. Rule: "buy" + event/service = todo. "buy" + physical item = shopping.

These edge cases help cheap LLMs distinguish between Quick Capture targets when the trigger phrase is ambiguous.
  </action>
  <verify>
Verify by checking TOOLS.md:
1. "remind me" edge cases exist with time/no-time distinction
2. "Quick Capture conflicts" subsection exists
3. "we need + verb vs noun" rule documented
4. "buy + event vs item" rule documented
  </verify>
  <done>
Edge Cases section covers Quick Capture disambiguation including remind-me time detection, "we need" verb-vs-noun parsing, and "buy" event-vs-item distinction.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. TOOLS.md contains "## Quick Capture" section
2. Section has trigger phrase table covering notes, shopping, and todos
3. At least 6 input/output examples present
4. DO/DO NOT table present
5. Edge Cases section updated with Quick Capture conflicts
6. "todo X" appears as a Telegram handler trigger
7. Disambiguation rules cover "remind me" with/without time
8. All file operation instructions reference correct household file paths
</verification>

<success_criteria>
A cheap LLM reading TOOLS.md can:
1. Recognize "remember X" and route to notes.md with Pacific timestamp
2. Recognize "we need X" and route to shopping.md
3. Recognize "todo X" and route to todos.md
4. Distinguish "remind me to X at 3pm" (calendar) from "remind me to X" (todo)
5. Handle "we need to fix the fence" as a todo, not a shopping item
</success_criteria>

<output>
After completion, create `.planning/phases/02-quick-capture/02-01-SUMMARY.md`
</output>
