---
phase: 06-daily-morning-briefing
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - TOOLS.md
  - QUICKSTART.md
  - AGENTS.md
  - household/meals/favourites.md
autonomous: true

must_haves:
  truths:
    - "User can say 'save recipe [anything]' and it gets stored verbatim in favourites.md"
    - "favourites.md has an HTML comment format header like other household files"
    - "QUICKSTART.md references all three new features (automated briefing, enhanced briefing, save recipe)"
    - "AGENTS.md startup checklist mentions automated morning briefing and save recipe"
    - "QUICKSTART.md stays under ~120 lines for cheap LLM context efficiency"
  artifacts:
    - path: "household/meals/favourites.md"
      provides: "Recipe favourites storage file with format header"
      contains: "FORMAT"
    - path: "TOOLS.md"
      provides: "Save Recipe trigger phrase documentation"
      contains: "save recipe"
    - path: "QUICKSTART.md"
      provides: "Condensed references for automated briefing, enhanced briefing sections, save recipe"
      contains: "save recipe"
    - path: "AGENTS.md"
      provides: "Startup checklist mentions for new features"
      contains: "Morning Briefing"
  key_links:
    - from: "TOOLS.md"
      to: "household/meals/favourites.md"
      via: "Save recipe trigger phrase stores text to file"
      pattern: "save recipe"
    - from: "QUICKSTART.md"
      to: "TOOLS.md"
      via: "Condensed reference points to full documentation"
      pattern: "TOOLS.md"
---

<objective>
Add the Save Recipe feature to TOOLS.md, create the favourites.md file, and update QUICKSTART.md and AGENTS.md with condensed references for all three Phase 6 features.

Purpose: Complete the Phase 6 feature set with save recipe functionality and ensure cheap LLMs can discover all new features from quick references.
Output: Save Recipe docs in TOOLS.md, favourites.md file, updated QUICKSTART.md and AGENTS.md.
</objective>

<execution_context>
@/Users/greg/.claude/get-shit-done/workflows/execute-plan.md
@/Users/greg/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-daily-morning-briefing/06-01-SUMMARY.md
@TOOLS.md
@QUICKSTART.md
@AGENTS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Save Recipe to TOOLS.md and create favourites.md</name>
  <files>TOOLS.md, household/meals/favourites.md</files>
  <action>
**Create household/meals/favourites.md:**

```markdown
<!-- FORMAT:
  Purpose: Saved/favourite recipes -- titles, URLs, or both
  Line format: "- {text}" (stored verbatim from user input)
  To add: Append "- {whatever follows 'save recipe'}" to the list
  Rules:
    - Store text exactly as provided (could be a title, URL, or both)
    - One entry per line
    - Do not modify, reformat, or validate the saved text
    - Capitalize first letter if the text starts lowercase
  Examples:
    - Ham and Cheese Egg Muffins https://peaceloveandlowcarb.com/ham-and-cheese-egg-muffins/
    - Grandma's pot roast
    - https://somesite.com/recipe/123
-->

## Favourite Recipes

```

**Add Save Recipe section to TOOLS.md:**

Add a new top-level section (same level as Quick Capture and Meal Planning) AFTER the Meal Planning section and BEFORE "Edge Cases for Telegram Command Parsing". The section should be:

```markdown
## Save Recipe

Save Recipe enables quick storage of recipe titles, URLs, or both to a favourites file. The saved text is stored verbatim -- no validation or reformatting.

### Trigger Phrase Table

| Trigger Pattern | Target File | Action |
|---|---|---|
| "save recipe X" | `household/meals/favourites.md` | Append X verbatim as list item |

### Parsing Rules

1. Extract everything after "save recipe " (case-insensitive trigger)
2. Capitalize first letter if the text starts lowercase
3. Format: `- {saved text}` (one line)
4. Read `household/meals/favourites.md`, append the new line, write file back

### Input/Output Examples

**Input:** "save recipe Ham and Cheese Egg Muffins https://peaceloveandlowcarb.com/ham-and-cheese-egg-muffins/"
**Action:** Read favourites.md, append `- Ham and Cheese Egg Muffins https://peaceloveandlowcarb.com/ham-and-cheese-egg-muffins/`
**Response:** "Saved! ðŸ“Œ Ham and Cheese Egg Muffins"

**Input:** "save recipe grandma's pot roast"
**Action:** Read favourites.md, append `- Grandma's pot roast`
**Response:** "Saved! ðŸ“Œ Grandma's pot roast"

**Input:** "save recipe https://somesite.com/recipe/123"
**Action:** Read favourites.md, append `- https://somesite.com/recipe/123`
**Response:** "Saved! ðŸ“Œ https://somesite.com/recipe/123"

### DO / DO NOT for Save Recipe

| DO | DO NOT | WHY |
|---|---|---|
| Store the text exactly as provided after "save recipe" | Parse or validate URLs | User may save just a title, just a URL, or both |
| Capitalize first letter | Reformat the entire string | Minimal normalization for consistency |
| Confirm with recipe name/text in response | Give detailed explanation | Quick capture pattern -- keep it fast |
| Read file before appending | Use `echo >>` to append | Must preserve existing content and format header |
```

Also update the Household Markdown Files table (around line 103-111 in TOOLS.md) to add a row for favourites.md:
```
| `meals/favourites.md` | Saved recipe titles and links |
```
  </action>
  <verify>
Verify household/meals/favourites.md exists and has FORMAT comment header.
Grep TOOLS.md for "Save Recipe" -- should find section header.
Grep TOOLS.md for "favourites.md" -- should find in file table and save recipe section.
Grep TOOLS.md for "save recipe" (lowercase) -- should find trigger phrase documentation.
  </verify>
  <done>
TOOLS.md has a Save Recipe section with trigger phrases, parsing rules, examples, and DO/DO NOT table. household/meals/favourites.md exists with HTML comment format header and empty recipe list. Household file table in TOOLS.md includes favourites.md.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update QUICKSTART.md and AGENTS.md with all Phase 6 features</name>
  <files>QUICKSTART.md, AGENTS.md</files>
  <action>
**QUICKSTART.md changes:**

Update the existing Briefing section (currently lines 84-98) to mention the enhanced briefing and automated morning briefing. Also add Save Recipe. Target: keep total file under ~120 lines.

1. **Expand the Briefing section** (currently lines 84-98). Update "Data sources (5):" to "Data sources (7):" and add two new items:
   ```
   6. Meat reminder (if tonight's dinner has meat keywords: chicken, beef, pork, salmon, etc.)
   7. Recipe inspiration (2-3 random recipes from peaceloveandlowcarb.com/feed/)
   ```
   Add a note: "Meat reminder section is skipped if no meat keywords found."

2. **Add Automated Morning Briefing** sub-section right after the Briefing section and before Response Style:
   ```
   ## Automated Morning Briefing

   Sent proactively during heartbeat polls, 7-10 AM Pacific. Same 7-section format.
   - Dedup: Check `memory/heartbeat-state.json` field `lastMorningBriefing` = today's date
   - If already sent today: skip. If outside 7-10 AM: skip.
   - After sending: update `lastMorningBriefing` to today's date
   ```

3. **Add Save Recipe** section after Automated Morning Briefing and before Response Style:
   ```
   ## Save Recipe (household/meals/favourites.md)

   | User says | Action |
   |-----------|--------|
   | "save recipe [anything]" | Append verbatim to favourites.md |

   - Store exactly as provided (title, URL, or both)
   - Response: "Saved! ðŸ“Œ {text}"
   ```

**AGENTS.md changes:**

Update Step 4 (currently around lines 29-34). Add two new lines after the existing Briefing mention (line 34):
- **Automated Morning Briefing:** During heartbeat polls between 7-10 AM Pacific, send the full briefing proactively. Dedup via `memory/heartbeat-state.json`. See HEARTBEAT.md for task details and TOOLS.md for Automated Morning Briefing subsection.
- **Save Recipe:** Users can say "save recipe [anything]" to store recipes in `household/meals/favourites.md`. See TOOLS.md Save Recipe section.
  </action>
  <verify>
Grep QUICKSTART.md for "7" near "Data sources" -- should find "Data sources (7)".
Grep QUICKSTART.md for "Automated Morning Briefing" -- should find section.
Grep QUICKSTART.md for "save recipe" -- should find section.
Grep QUICKSTART.md for "Meat reminder" or "meat" -- should find in data sources list.
Count total lines in QUICKSTART.md -- should be under ~120 lines.
Grep AGENTS.md for "Automated Morning Briefing" -- should find Step 4 mention.
Grep AGENTS.md for "Save Recipe" -- should find Step 4 mention.
  </verify>
  <done>
QUICKSTART.md has updated Briefing section with 7 data sources, Automated Morning Briefing section, and Save Recipe section -- all under ~120 lines total. AGENTS.md Step 4 mentions automated morning briefing (with heartbeat/dedup reference) and save recipe (with trigger phrase and file reference).
  </done>
</task>

</tasks>

<verification>
1. household/meals/favourites.md exists with HTML comment format header
2. TOOLS.md has Save Recipe section with trigger phrases, examples, DO/DO NOT table
3. TOOLS.md household file table includes favourites.md
4. QUICKSTART.md references all 7 briefing data sources
5. QUICKSTART.md has Automated Morning Briefing and Save Recipe sections
6. QUICKSTART.md total line count under ~120
7. AGENTS.md Step 4 mentions automated morning briefing and save recipe
</verification>

<success_criteria>
- "save recipe [text]" trigger is fully documented in TOOLS.md with examples
- favourites.md created with format header matching household file conventions
- QUICKSTART.md updated with all Phase 6 features, under ~120 lines
- AGENTS.md startup checklist references automated briefing and save recipe
- Cheap LLMs can discover and execute all new features from QUICKSTART.md alone
</success_criteria>

<output>
After completion, create `.planning/phases/06-daily-morning-briefing/06-02-SUMMARY.md`
</output>
