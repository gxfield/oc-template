---
phase: 03-meal-planning
plan: 03
type: execute
wave: 1
depends_on: []
files_modified: [calendar/calendar.js]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Running 'node calendar/calendar.js now' outputs the full day name (e.g., 'Monday') alongside the date and time"
    - "LLM can parse the day name from the 'now' command output to look up tonight's meal in this-week.md"
  artifacts:
    - path: "calendar/calendar.js"
      provides: "Day name in 'now' command output"
      contains: "dayNameFull"
  key_links:
    - from: "calendar/calendar.js 'now' command"
      to: "household/meals/this-week.md day lookup"
      via: "Full day name in now output matches day names in meal plan file"
      pattern: "Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday"
---

<objective>
Fix the calendar.js 'now' command to output the full day name (Monday, Tuesday, etc.) alongside the existing date and time.

Purpose: TOOLS.md and QUICKSTART.md instruct LLMs to get the current day name from `node calendar/calendar.js now` for meal plan lookups ("what's for dinner tonight"), but the command currently only outputs date and time without the day name. This blocks two Phase 3 success criteria.

Output: Modified calendar.js where running `node calendar/calendar.js now` outputs something like:
`Current Pacific Time: Sunday, 2026-02-09 15:30`
</objective>

<execution_context>
@/Users/greg/.claude/get-shit-done/workflows/execute-plan.md
@/Users/greg/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-meal-planning/03-VERIFICATION.md
@calendar/calendar.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add full day name to calendar.js 'now' command output</name>
  <files>calendar/calendar.js</files>
  <action>
Two changes to calendar/calendar.js:

1. Modify the `nowInPacific()` function (around line 74) to also return the full day name string. Currently it returns `{ year, month, day, hour, minute, dateStr, weekday: wd }`. The function already computes `dayName` as a short name (e.g., "Mon") via `Intl.DateTimeFormat` with `weekday: 'short'`. Add a second `Intl.DateTimeFormat` call using `weekday: 'long'` to get the full name (e.g., "Monday"), store it in `dayNameFull`, and include it in the return object:
   ```
   const dayNameFull = new Intl.DateTimeFormat('en-US', {
     timeZone: USER_TZ,
     weekday: 'long',
   }).format(now);
   return { year, month, day, hour, minute, dateStr, weekday: wd, dayNameFull };
   ```

2. Modify the `now` case (around line 385-388) to include the day name in the output:
   Change:
   ```
   console.log(`Current Pacific Time: ${n.dateStr} ${n.hour}:${n.minute}`);
   ```
   To:
   ```
   console.log(`Current Pacific Time: ${n.dayNameFull}, ${n.dateStr} ${n.hour}:${n.minute}`);
   ```

   This changes the output from:
   `Current Pacific Time: 2026-02-09 15:30`
   to:
   `Current Pacific Time: Sunday, 2026-02-09 15:30`

Important:
- Keep the emoji prefix if present in current output
- Do NOT change any other commands or functionality
- Do NOT change the `nowInPacific()` return value for `weekday` (numeric) -- only ADD `dayNameFull`
- The full day name must match the format used in household/meals/this-week.md (capitalized: Monday, Tuesday, etc.)
  </action>
  <verify>
Run `node calendar/calendar.js now` and confirm the output includes a full day name (Monday through Sunday) before the date. The day name should match today's actual day in Pacific time.

Also verify no other functionality is broken by running:
- `node calendar/calendar.js` (should show help/usage)
  </verify>
  <done>
`node calendar/calendar.js now` outputs the full day name (e.g., "Sunday") alongside the date and time. The day name matches the format used in household/meals/this-week.md (full capitalized names: Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday). No other calendar.js commands are affected.
  </done>
</task>

</tasks>

<verification>
1. Run `node calendar/calendar.js now` -- output includes full day name matching today's Pacific timezone day
2. The day name in output uses full capitalized format (Monday, not Mon or monday)
3. The output is easily parseable by an LLM: day name appears clearly in the line
4. Simulate the "what's for dinner tonight" workflow:
   - Parse day name from `now` output
   - Find matching `- {DayName}:` line in household/meals/this-week.md
   - Confirm the meal is returned correctly
</verification>

<success_criteria>
- `node calendar/calendar.js now` outputs a line containing the full day name (Monday-Sunday)
- Day name matches Pacific timezone (not UTC)
- Day name format matches this-week.md format (full capitalized names)
- No other calendar.js functionality is broken
</success_criteria>

<output>
After completion, create `.planning/phases/03-meal-planning/03-03-SUMMARY.md`
</output>
